app_Vue=new Vue({el:"#"+app_Vue_id,mixins:[Main_Mixin],components:{},data:function(){return{SectionStep:1,birth_year:0,birth_month:0,birth_date:0,id:null,birth:"",mobile:"",receiveState:null,authorizeState:null,activeState:null,applyState:null,dataState:null,nameState:null}},watch:{AllDone:function(new_val,old_val){var self=this;1==new_val&&ProccessMsg&&ProccessMsg.Hide()}},beforeCreate:function(){var self=this},created:function(){var self=this},mounted:function(){var self=this},methods:{Send:function(){var self=this,errorcount=0,errormsg="",_text_align_class="text_align_left";if(null==self.id||""==self.id?(errorcount++,errormsg+="<div>請輸入您的身分證字號/統編</div>"):checkID(self.id)||(errorcount++,errormsg+="<div>請輸入正確身分證字號</div>"),0==self.birth_year||0==self.birth_month||0==self.birth_date)errorcount++,errormsg+="<div>請選擇您的出生年月日</div>";else{var datenow=new Date,yy=datenow.getFullYear(),mm=datenow.getMonth()+1,dd=datenow.getDate();new Date(yy,mm-1,dd)<new Date(self.birth_year,self.birth_month-1,self.birth_date)&&(errorcount++,errormsg+="<div>請選擇正確的出生年月日</div>")}if(null==self.mobile||""==self.mobile?(errorcount++,errormsg+="<div>請輸入您的手機號碼</div>"):checkcellphone(self.mobile)||(errorcount++,errormsg+="<div>請輸入正確手機號碼</div>"),errorcount>0){var buttons=[{text:"確認",class:["btn_default","msg_btnconfirm","confirm"],parameter_fn:{},callback_fn:function(e,parameter){ProccessMsg&&ProccessMsg.Hide()}}],options={Center:!0,Fixed:!0,directionAnimation:"bottom",showLoadingbar:!1,clicktoRemove:!0,showCoverbg:!0,showRemoveBtn:!1,autoHide:!1,CoverBgOpacity:.7,customclass:["alert","top","text_align_left"],html:"<div class='textContainer'>"+errormsg+"</div>"};ProccessMsg=showProccessMsg(options,!1,null,buttons)}else if(self.isWSMode){var options={Center:!0,Fixed:!0,directionAnimation:"bottom",showLoadingbar:!0,clicktoRemove:!1,showCoverbg:!0,showRemoveBtn:!1,autoHide:!1,CoverBgOpacity:.7,customclass:["alert","top"],html:"<div class='textContainer'>處理中</div>"};ProccessMsg=showProccessMsg(options,!1,null,[]);var WS_OpenProcessNew_success=function(data){if(self.successPostCallback_WS(data))if(self.dataState=data.filter((function(item){return item.Item.indexOf("開戶資料填寫/建檔")>-1}))[0],"N"==self.dataState.Result){ProccessMsg&&ProccessMsg.Hide();var buttons=[{text:"申請開戶",class:["btn_default","msg_btnconfirm","confirm"],parameter_fn:{},callback_fn:function(e,parameter){window.location.href=self.Router.open.apply.path}}],options={Center:!0,Fixed:!0,directionAnimation:"bottom",showLoadingbar:!1,clicktoRemove:!0,showCoverbg:!0,showRemoveBtn:!1,autoHide:!1,CoverBgOpacity:.7,customclass:["alert","top","text_align_left"],html:"<div class='textContainer'>您尚未在本公司開戶，您可點選申請開戶成為百揚投資理財貴賓</div>"};ProccessMsg=showProccessMsg(options,!1,null,buttons)}else if(["B","M","X"].indexOf(self.dataState.Result)>-1){ProccessMsg&&ProccessMsg.Hide();var buttons=[{text:"重新輸入",class:["btn_default","msg_btnconfirm","confirm"],parameter_fn:{},callback_fn:function(e,parameter){self.birth_year=0,self.birth_month=0,self.birth_date=0,self.mobile="",ProccessMsg&&ProccessMsg.Hide()}}],options={Center:!0,Fixed:!0,directionAnimation:"bottom",showLoadingbar:!1,clicktoRemove:!0,showCoverbg:!0,showRemoveBtn:!1,autoHide:!1,CoverBgOpacity:.7,customclass:["alert","top","text_align_left"],html:"<div class='textContainer'>您所輸入的資料與留存本公司不一致，請重新輸入或洽詢本公司客戶服務專線0800-005-908</div>"};ProccessMsg=showProccessMsg(options,!1,null,buttons)}else self.openID=self.id,self.receiveState=data.filter((function(item){return item.Item.indexOf("收件狀態")>-1}))[0],self.authorizeState=data.filter((function(item){return item.Item.indexOf("核印狀態")>-1}))[0],self.activeState=data.filter((function(item){return item.Item.indexOf("啟用狀態")>-1}))[0],self.applyState=data.filter((function(item){return item.Item.indexOf("申請方式")>-1}))[0],self.nameState=data.filter((function(item){return item.Item.indexOf("姓名")>-1}))[0]||"",self.SectionStep=2,ProccessMsg&&ProccessMsg.Hide()},query={CID:self.id,yyyymmdd:[self.birth_year,self.birth_month,self.birth_date].join(""),PhoneNo:self.mobile};self.CallAjax3rdAPI(self.setWebDataUrl("WS_OpenProcessNew",query),null,!1,WS_OpenProcessNew_success,self.ajaxError_WS)}}},computed:{AllDone:function(){var self=this;return 2==this.SectionStep&&this.getBasicDataDone},applyStateText:function(){var self=this,result="書面";switch(this.applyState.Result){case"2":result="數位開戶";break;case"3":result="線上填表"}return result},authorizeStateText:function(){var self=this,result="--";switch(this.authorizeState.Result){case"A":result="線上核印完成";break;case"C":result="尚未核印";break;case"D":result="核印中";break;case"E":result="核印完成";break;case"F":result="核印失敗"}return result},receiveStateText:function(){var self=this,result="尚未簽署";switch(this.receiveState.Result){case"N":result="尚未簽署";break;case"W":result="已到件，補件中";break;case"Y":result="已到件，建檔完成";break;case"S":result="簽署完成";break;case"X":result="簽署失敗"}return result},dataStateText:function(){var self=this,result="";switch(this.dataState.Result){case"N":result="未建檔";break;case"W":result="填寫中";break;case"C":result="填寫完成";break;case"Y":result="建檔完成"}return result},DateOfMonth:function(){var self=this,data=this.getDaysOfMonth(this.birth_year,this.birth_month);return data.indexOf(this.birth_date)<0&&""!=this.birth_date&&(this.birth_date="01"),data}}});