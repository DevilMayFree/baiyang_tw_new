var $remindW_popupbox, _remindW_popup, $remindN_popupbox, _remindN_popup, $remindAuthorize_popupbox, _remindAuthorize_popup, $remindUnAuthorize_popupbox, _remindUnAuthorize_popup, $remindContinue_popupbox, _remindContinue_popup, $bank_popupbox, _bank_popup, $remindUsingMobile_popupbox, _remindUsingMobile_popup; app_Vue = new Vue({ el: "#" + app_Vue_id, mixins: [Main_Mixin], components: {}, data: function () { return { applyData: { id: null, place: null, getdate: null, gettype: null, idchk: null, tax_status: null, mobile: null, birth: null, bank_id: null, bank_name: 0, chk1: 0, chk2: 0, chk3: 0, mysales: null, SCode1: null, SalesID: null }, id: null, place: "", getdate: null, gettype: "", idchk: "", tax_status: null, device: null, birth_year: 0, birth_month: 0, birth_date: 0, tempBankID: "", mysales: "", SCode1: "", SalesID: "", searchvalue: "", currentFilter1: "", currentFilter2: [], agree1: !1, agree2: !1, agree3: "", SectionStep: 1, initLoginWindowCount: 0, showRemindMobilePopup: !1 } }, watch: { id: function (a, t) { (this.applyData.id = a) != t && this.ClearData() }, place: function (a, t) { this.applyData.place = a }, getdate: function (a, t) { this.applyData.getdate = a }, gettype: function (a, t) { var e = this; e.applyData.gettype = a, "0" == e.applyData.gettype && (e.applyData.place = "", e.applyData.getdate = "") }, idchk: function (a, t) { this.applyData.idchk = a }, tax_status: function (a, t) { this.applyData.tax_status = a }, isForeigner: function (a, t) { a || this.$nextTick(function () { onloadCallback() }) }, birth_year: function (a, t) { var e = this, i = [a, e.birth_month, e.birth_date]; e.applyData.birth = i.join("-") }, birth_month: function (a, t) { var e = this, i = [e.birth_year, a, e.birth_date]; e.applyData.birth = i.join("-") }, birth_date: function (a, t) { var e = this, i = [e.birth_year, e.birth_month, a]; e.applyData.birth = i.join("-") }, device: function (a, t) { var e = this; switch (e.applyData.chk1 = e.applyData.chk2 = e.applyData.chk3 = 0, a) { case "1": e.applyData.chk1 = 1; break; case "2": e.applyData.chk2 = 1; break; case "3": e.applyData.chk3 = 1 } }, SCode1: function (a, t) { this.applyData.SCode1 = a }, SalesID: function (a, t) { this.applyData.SalesID = a }, mysales: function (a, t) { this.applyData.mysales = a }, searchvalue: function (a, t) { this.currentFilter1 = a }, currentFilter2: function (a, t) { }, SectionStep: function (a, t) { 1 == a && this.$nextTick(function () { onloadCallback() }) }, agree1: function (a, t) { a && $("html,body").stop().animate({ scrollTop: $("#Agree2Content").offset().top }, 800, "easeOutQuart") }, agree2: function (a, t) { a && $("html,body").stop().animate({ scrollTop: $("#SaleAgreeContent").offset().top }, 800, "easeOutQuart") } }, beforeCreate: function () { }, created: function () { var a = this; a.getBankList(), getplaceCode(), getSalesCode(), "0" != a.applyData.gettype && ("" != a.applyData.place && $("#place").val(a.applyData.place), "" != a.applyData.SCode1 && $("#SCode1").val(a.applyData.SCode1)) }, mounted: function () { $remindAuthorize_popupbox = $("#remindAuthorize_popupbox"), _remindAuthorize_popup = $remindAuthorize_popupbox.BlockUI(), $remindUnAuthorize_popupbox = $("#remindUnAuthorize_popupbox"), _remindUnAuthorize_popup = $remindUnAuthorize_popupbox.BlockUI(), $remindContinue_popupbox = $("#remindContinue_popupbox"), _remindContinue_popup = $remindContinue_popupbox.BlockUI(), $remindContinue_popupbox = $("#remindContinue_popupbox"), _remindContinue_popup = $remindContinue_popupbox.BlockUI(), isMobile() || initXcsp() }, methods: { checkUser: function () { var e = this, a = 0, t = "", i = "text_align_left", p = grecaptcha.getResponse(captchaWidgetId); if (null == e.applyData.id || "" == e.applyData.id ? (a++, t += "<div>請輸入您的身分證字號/統編</div>") : checkID(e.applyData.id) || (a++, t += "<div>請輸入正確身分證字號</div>"), null == e.applyData.gettype || "" == e.applyData.gettype) a++, t += "<div>請選擇領補換類別</div>"; else if ("0" != e.applyData.gettype) { if (null != e.applyData.place && "" != e.applyData.place || (a++, t += "<div>請選擇發證地點</div>"), null == e.applyData.getdate || "" == e.applyData.getdate) a++, t += "<div>請輸入7碼民國格式發證日期</div>"; else if (7 != (d = e.applyData.getdate).length) a++, t += "<div>請輸入7碼民國格式發證日期</div>"; else { var l = d.substr(0, 3), o = d.substr(3, 2), n = d.substr(5, 2); 12 < parseFloat(o) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>"), 1 == parseFloat(o) || 3 == parseFloat(o) || 5 == parseFloat(o) || 7 == parseFloat(o) || 8 == parseFloat(o) || 10 == parseFloat(o) || 12 == parseFloat(o) ? 31 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 4 == parseFloat(o) || 6 == parseFloat(o) || 9 == parseFloat(o) || 11 == parseFloat(o) ? 30 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 2 == parseFloat(o) && ((parseFloat(l) + 1911) % 4 == 0 ? 29 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 28 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>")) } } else e.applyData.place = "", e.applyData.getdate = ""; if (null == e.applyData.tax_status && (a++, t += "<div>請選擇您的國籍/稅籍</div>"), null == e.applyData.mobile || "" == e.applyData.mobile ? (a++, t += "<div>請輸入您的手機號碼</div>") : checkcellphone(e.applyData.mobile) || (a++, t += "<div>請輸入正確手機號碼</div>"), 0 == e.birth_year || 0 == e.birth_month || 0 == e.birth_date) a++, t += "<div>請選擇您的出生年月日</div>"; else { l = (u = new Date).getFullYear(), o = u.getMonth() + 1, n = u.getDate(); new Date(l, o - 1, n) < new Date(e.birth_year, e.birth_month - 1, e.birth_date) && (a++, t += "<div>請選擇正確的出生年月日</div>") } if (null != e.applyData.bank_id && null != e.applyData.bank_name || (a++, t += "<div>請選擇您的約定銀行別</div>"), null != e.TempBankItem && "N" == e.TempBankItem.Online_Sign && "N" == e.TempBankItem.Netbank_Sign ? (e.applyData.chk1 = e.applyData.chk2 = 0, e.applyData.chk3 = 1) : 0 == e.applyData.chk1 && 0 == e.applyData.chk2 && 0 == e.applyData.chk3 && (a++, t += "<div>請選擇您的設備</div>"), null == e.applyData.mysales || "" == e.applyData.mysales ? (a++, t += "<div>請選擇是否指定業務</div>") : "Y" == e.applyData.mysales ? null == e.applyData.SCode1 || "" == e.applyData.SCode1 || null == e.applyData.SalesID || "" == e.applyData.SalesID ? (a++, t += "<div>請輸入指定業務員資料</div>") : 6 != e.applyData.SalesID.length ? (a++, t += "<div>業務員代碼請輸入6碼</div>") : isNaN(e.applyData.SalesID) && (a++, t += "<div>業務員代碼請輸入數字</div>") : (e.applyData.SCode1 = "988", e.applyData.SalesID = "00M888"), p && "" != p || (a++, t += "<div>請勾選我不是機器人</div>"), e.isWSMode) { if (0 < a) { var r = [{ text: "確認", class: ["btn_default", "msg_btnconfirm", "confirm"], parameter_fn: {}, callback_fn: function (a, t) { ProccessMsg && ProccessMsg.Hide() } }], s = { Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !1, clicktoRemove: !0, showCoverbg: !0, showRemoveBtn: !1, autoHide: !1, CoverBgOpacity: .7, customclass: ["alert", "top", i], html: "<div class='textContainer'>" + t + "</div>" }; return void (ProccessMsg = showProccessMsg(s, !1, null, r)) } var c = { reCaptchaResponse: p }; e.CallAjax3rdAPI(e.setUrl("checkCaptcha.ashx"), c, !0, function (a) { if (e.successPostCallback(a)) { var t = { CID: e.applyData.id }; e.CallAjax3rdAPI(e.setWebDataUrl("WS_CheckCIDNew", t), null, !1, function (a) { if (e.successPostCallback_WS(a)) { if ("N" == a[0].Result) _remindN_popup.Show(), grecaptcha.reset(); else if ("W" == a[0].Result) _remindW_popup.Show(), grecaptcha.reset(); else if ("Y" == a[0].Result) if ("Y" == a[0].ISFilled) _remindContinue_popup.Show(), grecaptcha.reset(); else { if ((1 == e.predictDate.type || 3 == e.predictDate.type) && isMobile()) return grecaptcha.reset(), void (ProccessMsg = showProccessMsg({ Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !1, clicktoRemove: !0, showCoverbg: !0, showRemoveBtn: !1, autoHide: !1, CoverBgOpacity: .7, customclass: ["alert", "top", i], html: "<div class='textContainer'>提醒您！您選擇使用晶片金融卡進行開戶，建議您使用電腦繼續操作。</div>" }, !1, null, [{ text: "我知道了", class: ["btn_default", "msg_btnconfirm", "confirm"], parameter_fn: {}, callback_fn: function (a, t) { e.SectionStep = 2, ProccessMsg && ProccessMsg.Hide() } }])); e.SectionStep = 2 } } else grecaptcha.reset() }, e.ajaxError_WS) } else grecaptcha.reset() }, e.ajaxError) } if (!e.isWSMode) { if (null == e.applyData.gettype || "" == e.applyData.gettype) a++, t += "<div>請選擇領補換類別</div>"; else if ("0" != e.applyData.gettype) { var d; if (null != e.applyData.place && "" != e.applyData.place || (a++, t += "<div>請選擇發證地點</div>"), null == e.applyData.getdate || "" == e.applyData.getdate) a++, t += "<div>請輸入7碼民國格式發證日期</div>"; else if (7 != (d = e.applyData.getdate).length) a++, t += "<div>請輸入7碼民國格式發證日期</div>"; else { l = d.substr(0, 3), o = d.substr(3, 2), n = d.substr(5, 2); 12 < parseFloat(o) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>"), 1 == parseFloat(o) || 3 == parseFloat(o) || 5 == parseFloat(o) || 7 == parseFloat(o) || 8 == parseFloat(o) || 10 == parseFloat(o) || 12 == parseFloat(o) ? 31 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 4 == parseFloat(o) || 6 == parseFloat(o) || 9 == parseFloat(o) || 11 == parseFloat(o) ? 30 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 2 == parseFloat(o) && ((parseFloat(l) + 1911) % 4 == 0 ? 29 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>") : 28 < parseFloat(n) && (a++, t += "<div>民國格式發證日期輸入錯誤</div>")) } } else e.applyData.place = "", e.applyData.getdate = ""; if (null == e.applyData.tax_status && (a++, t += "<div>請選擇您的國籍/稅籍</div>"), null == e.applyData.mobile || "" == e.applyData.mobile ? (a++, t += "<div>請輸入您的手機號碼</div>") : checkcellphone(e.applyData.mobile) || (a++, t += "<div>請輸入正確手機號碼</div>"), 0 == e.birth_year || 0 == e.birth_month || 0 == e.birth_date) a++, t += "<div>請選擇您的出生年月日</div>"; else { var u; l = (u = new Date).getFullYear(), o = u.getMonth() + 1, n = u.getDate(); new Date(l, o - 1, n) < new Date(e.birth_year, e.birth_month - 1, e.birth_date) && (a++, t += "<div>請選擇正確的出生年月日</div>") } if (null != e.applyData.bank_id && null != e.applyData.bank_name || (a++, t += "<div>請選擇您的約定銀行別</div>"), null != e.TempBankItem && "N" == e.TempBankItem.Online_Sign && "N" == e.TempBankItem.Netbank_Sign ? (e.applyData.chk1 = e.applyData.chk2 = 0, e.applyData.chk3 = 1) : 0 == e.applyData.chk1 && 0 == e.applyData.chk2 && 0 == e.applyData.chk3 && (a++, t += "<div>請選擇您的設備</div>"), null == e.applyData.mysales || "" == e.applyData.mysales ? (a++, t += "<div>請選擇是否指定業務</div>") : "Y" == e.applyData.mysales ? null == e.applyData.SCode1 || "" == e.applyData.SCode1 || null == e.applyData.SalesID || "" == e.applyData.SalesID ? (alert(e.applyData.SCode1), alert(e.applyData.SalesID), a++, t += "<div>請輸入指定業務員資料</div>") : 6 != e.applyData.SalesID.length ? (a++, t += "<div>業務員代碼請輸入6碼</div>") : isNaN(e.applyData.SalesID) && (a++, t += "<div>業務員代碼請輸入數字</div>") : (e.applyData.SCode1 = "988", e.applyData.SalesID = "00M888"), 0 < a) { r = [{ text: "確認", class: ["btn_default", "msg_btnconfirm", "confirm"], parameter_fn: {}, callback_fn: function (a, t) { ProccessMsg && ProccessMsg.Hide() } }], s = { Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !1, clicktoRemove: !0, showCoverbg: !0, showRemoveBtn: !1, autoHide: !1, CoverBgOpacity: .7, customclass: ["alert", "top", i], html: "<div class='textContainer'>" + t + "</div>" }; return void (ProccessMsg = showProccessMsg(s, !1, null, r)) } if ((1 == e.predictDate.type || 2 == e.predictDate.type) && isMobile()) return e.showRemindMobilePopup = !0, ProccessMsg && ProccessMsg.Hide(), void e.$nextTick(function () { _remindUsingMobile_popup.Show() }); e.SectionStep = 2 } }, saveApplyData: function () { var a = this, t = 0, e = ""; (a.agree1 || (t++, e += "<div>請勾選基金開戶暨交易約定事項</div>"), a.agree2 || (t++, e += "<div>請勾選個人資料使用授權同意</div>"), 0 < t) ? ProccessMsg = showProccessMsg({ Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !1, clicktoRemove: !0, showCoverbg: !0, showRemoveBtn: !1, autoHide: !1, CoverBgOpacity: .7, customclass: ["alert", "top", "text_align_left"], html: "<div class='textContainer'>" + e + "</div>" }, !1, null, [{ text: "確認", class: ["btn_default", "msg_btnconfirm", "confirm"], parameter_fn: {}, callback_fn: function (a, t) { ProccessMsg && ProccessMsg.Hide() } }]) : ("" == a.agree3 && (a.agree3 = "0"), -1 < [1, 2, 3, 4].indexOf(a.predictDate.type) ? _remindAuthorize_popup.Show() : _remindUnAuthorize_popup.Show()) }, showBankPopup: function () { _bank_popup.Show() }, setBank: function (t) { var a = this; if ("" != t && t) { var e = a.apiBankList.filter(function (a) { return a.BankID == t })[0]; a.applyData.bank_id = e.BankID, a.applyData.bank_name = e.BankName, (a.device = null) != e && "N" == e.Online_Sign && "N" == e.Netbank_Sign && (a.device = 3), _bank_popup.Hide() } else { ProccessMsg = showProccessMsg({ Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !1, clicktoRemove: !0, showCoverbg: !0, showRemoveBtn: !1, autoHide: !0, CoverBgOpacity: .7, zIndex: 9007, zIndexCover: 9006, customclass: ["alert", "top"], html: "<div class='textContainer'>請選擇銀行</div>" }, !1, null, []) } }, checkIDW: function () { window.location.href = "https://www.fsitc.com.tw/" }, ready: function () { var e = this; ProccessMsg = showProccessMsg({ Center: !0, Fixed: !0, directionAnimation: "bottom", showLoadingbar: !0, clicktoRemove: !1, showCoverbg: !0, showRemoveBtn: !1, autoHide: !1, CoverBgOpacity: .7, customclass: ["alert", "top"], afterShow: function () { var a = !1; if (1 != e.predictDate.type && 3 != e.predictDate.type || isMobile() ? a = !0 : e.initLoginWindowCount <= 0 && (a = initLoginWindow()), a || 1 <= e.initLoginWindowCount) { var t = e.applyData; e.CallAjax3rdAPI(e.setUrl("checkUser.ashx"), t, !0, function (a) { if (e.successPostCallback(a)) { var t = { id: e.applyData.id, chk1: e.agree1 ? "1" : "0", chk2: e.agree2 ? "1" : "0", chk3: e.agree3 }; e.CallAjax3rdAPI(e.setUrl("addRule.ashx"), t, !0, function (a) { e.successPostCallback(a) && (window.location.href = e.Router.open.basic.path) }, e.ajaxError) } }, e.ajaxError) } else e.initLoginWindowCount++ }, html: "<div class='textContainer'>處理中</div>" }, !1, null, []) }, GoStep2: function () { this.SectionStep = 2, _remindUsingMobile_popup.Hide(), window.scrollTo(0, 0) }, ClearData: function () { } }, computed: { TempBankItem: function () { var t = this; return null == t.apiBankList ? null : t.apiBankList.filter(function (a) { return a.BankID == t.applyData.bank_id })[0] || null }, predictDate: function () { var a = this; return 0 == a.birth_year || 0 == a.birth_month || 0 == a.birth_date || null == a.device || null == a.applyData.tax_status ? null : (a.age = calculate_age(new Date(a.applyData.birth)), a.getPredictDate(a.device, a.applyData.tax_status)) }, isForeigner: function () { var a = this, t = !1; return "2" == a.tax_status ? t = !0 : a.id && "" != a.id && (t = !!(IdTaxNumberCheck(a.id) || IdTaxNumber2Check(a.id) || checkForeignID(a.id))), t }, DateOfMonth: function () { var a = this, t = a.getDaysOfMonth(a.birth_year, a.birth_month); return t.indexOf(a.birth_date) < 0 && "" != a.birth_date && (a.birth_date = "01"), t } } })